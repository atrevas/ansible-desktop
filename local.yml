---
- hosts: localhost
  connection: local
  become: true

  pre_tasks:
  - name: Upgrade packages and update dnf cache (Fedora)
    dnf:
      name: '*'
      update_cache: yes
      state: latest
    when: ansible_distribution == 'Fedora'

  tasks: 
  - name: Install RPM Fusion Repositories
    dnf:
      name: 
        - https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-34.noarch.rpm
        - https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-34.noarch.rpm
      disable_gpg_check: yes
      state: present
    when: ansible_distribution == 'Fedora' and ansible_distribution_version == '34'

  - name: Install basic utilities packages
    package:
      name: 
        - htop
        - neofetch
        - ncdu
      state: present

  - name: Remove unnecessary packages
    package:
      name:
        - totem # Default Gnome Video Player
      state: absent
